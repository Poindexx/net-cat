# TCP-Chat

## Цели

Проект заключается в создании аналога NetCat с архитектурой клиент-сервер, который может работать в серверном режиме, слушая входящие подключения на указанном порту, а также в клиентском режиме, подключаясь к указанному порту и передавая информацию серверу.

NetCat (команда `nc`) - это утилита командной строки для чтения и записи данных через сетевые соединения с использованием TCP или UDP. Она используется для всего, что связано с TCP, UDP или сокетами UNIX-домена. NetCat может открывать TCP-соединения, отправлять UDP-пакеты, слушать произвольные TCP и UDP порты и многое другое.

Проект должен работать аналогично оригинальному NetCat, то есть создавать групповой чат. Основные функции проекта:

- TCP соединение между сервером и множеством клиентов (соотношение 1 к многим).
- Требование имени для клиента.
- Контроль количества подключений.
- Клиенты должны иметь возможность отправлять сообщения в чат.
- Не передавать пустые сообщения от клиента.
- Сообщения должны быть идентифицированы временем отправки и именем пользователя, например: `[2020-01-20 15:48:41][client.name]:[client.message]`.
- Если клиент присоединяется к чату, все предыдущие сообщения должны быть загружены новому клиенту.
- Если клиент подключается к серверу, остальные клиенты должны быть уведомлены о присоединении нового клиента.
- Если клиент выходит из чата, остальные клиенты должны быть уведомлены о его выходе.
- Все клиенты должны получать сообщения, отправленные другими клиентами.
- Если клиент выходит из чата, остальные клиенты не должны отключаться.
- Если порт не указан, по умолчанию используется порт 8989. В противном случае программа должна отвечать сообщением о правильном использовании: `[USAGE]: ./TCPChat $port`.

## Инструкции

Проект написан на Go и включает следующие особенности:

- Запуск TCP сервера, прослушивание и принятие соединений.
- Использование горутин для обработки многопоточности.
- Использование каналов и мьютексов для синхронизации данных.
- Максимум 10 подключений.
- Код соответствует хорошим практикам разработки.
- Включены тестовые файлы для модульного тестирования как серверного, так и клиентского соединения.
- Обработка ошибок как на стороне сервера, так и на стороне клиента.

## Используемые пакеты

- `io`
- `log`
- `os`
- `fmt`
- `net`
- `sync`
- `time`
- `bufio`
- `errors`
- `strings`
- `reflect`

## Usage

```sh
$ go run .
Listening on the port :8989
$ go run . 2525
Listening on the port :2525
$ go run . 2525 localhost
[USAGE]: ./TCPChat $port
```


## Пример
После подключения клиенту показывается логотип Linux и запрашивается его имя:

```sh
$ nc $IP $port
Welcome to TCP-Chat!
         _nnnn_
        dGGGGMMb
       @p~qp~~qMb
       M|@||@) M|
       @,----.JM|
      JS^\__/  qKL
     dZP        qKRb
    dZP          qKKb
   fZP            SMMb
   HZM            MMMM
   FqM            MMMM
 __| ".        |\dS"qML
 |    `.       | `' \Zq
_)      \.___.,|     .'
\____   )MMMMMP|   .'
     `-'       `--'
[ENTER YOUR NAME]:
```

Клиент вводит свое имя и начинает общение:

```sh
$ nc localhost 2525
Welcome to TCP-Chat!
[ENTER YOUR NAME]: Yenlik
[2020-01-20 16:03:43][Yenlik]:hello
[2020-01-20 16:03:46][Yenlik]:How are you?
```
Пример общения нескольких клиентов:

```sh
[2020-01-20 16:04:10][Yenlik]:
Lee has joined our chat...
[2020-01-20 16:04:32][Lee]:Hi everyone!
[2020-01-20 16:04:35][Lee]:How are you?
[2020-01-20 16:04:41][Yenlik]:great, and you?
[2020-01-20 16:04:44][Lee]:good!
[2020-01-20 16:04:50][Lee]:alright, see ya!
[2020-01-20 16:04:57][Yenlik]:bye-bye!
[2020-01-20 16:04:57][Lee]:
Lee has left our chat...
```
